<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Mapa do Espaço Local</title>
<style>
html, body, #mapPlaceholder {
	padding: 0;
	margin: 0;
	height: 100%;
	width: 100%;
}

body {
	font-family: "Lato", sans-serif;
}

.sidenav {
	height: 100%;
	width: 260px;
	position: fixed;
	z-index: 1;
	top: 0;
	left: 0;
	background-color: #111;
	overflow-x: hidden;
	padding-top: 20px;
}

.sidenav label {
	padding: 6px 8px 6px 16px;
	text-decoration: none;
	font-size: 25px;
	color: #818181;
	display: block;
}

.sidenav a:hover {
	color: #f1f1f1;
}

.main {
	margin-left: 260px; /* Same as the width of the sidenav */
	font-size: 28px; /* Increased text to enable scrolling */
}

@media screen and (max-height: 450px) {
	.sidenav {padding-top: 15px;}
	.sidenav a {font-size: 18px;}
}
</style>
	<link rel="stylesheet" href="https://js.arcgis.com/4.10/esri/css/main.css">
	<script src="https://js.arcgis.com/4.10/"></script>
	<script src="astralLib.js"></script>
	<script src="astralMap.js"></script>
	<!-- <script type="text/javascript"></script> -->
	<script type="text/javascript">
		var astralMap = new AstralMap();
		
		var mapManager = new MapManager("mapPlaceholder", astralMap);
		
		function reload() {
			astralMap.latitude = parseFloat(document.getElementById("latitude").value);
			astralMap.longitude = parseFloat(document.getElementById("longitude").value);
			
			checkFeature(astralMap.moon, "enable_moon", "angle_moon");
			checkFeature(astralMap.sun, "enable_sun", "angle_sun");
			
			mapManager.reload();
		}
		
		function checkFeature(feature, checkinput, textinput) {
			if(document.getElementById(checkinput).checked) {
				feature.enable(parseFloat(document.getElementById(textinput).value));
			} else {
				feature.disable();
			}
		}
		
		function handleEnablers(checkbox, textinput) {
			if(checkbox.checked){
				document.getElementById(textinput).removeAttribute("disabled");
			} else {
				document.getElementById(textinput).setAttribute("disabled", "disabled");
			}
	   }
	   
		setTimeout(reload, 500);
	</script>
</head>
<body>

	<div class="sidenav">
	
		<p style="color:white">
			<center>
				<label style="text-align:center">Latitude</label>
				<input type="number" id="latitude" value="-22.9035"></input>
				<label style="text-align:center">Longitude</label>
				<input type="number" id="longitude" value="-43.2096"></input>
			</center>
		</p>
		
		<p style="color:white">
			<label style="text-align:center">SOL</label>
			<input type="checkbox" id="enable_sun" onchange="handleEnablers(this, 'angle_sun')"></input>
			<input type="number" id="angle_sun" value="55" disabled="disabled"></input>
			º (Graus)
		</p>
		
		<p style="color:white">
			<label style="text-align:center">LUA</label>
			<input type="checkbox" id="enable_moon" onchange="handleEnablers(this, 'angle_moon')"></input>
			<input type="number" id="angle_moon" value="0" disabled="disabled"></input>
			º (Graus)
		</p>
		
		<center>
			<button onclick="reload()">Reload</button>
		</center>
		
	</div>

	<div class="main">
		<div id="mapPlaceholder"></div>
	</div>

</body>
</html> 